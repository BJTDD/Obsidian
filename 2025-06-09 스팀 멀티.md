## 언리얼 멀티 
- 패키징 프로젝트 세팅 List of maps to include in a packaged build 에 레벨 추가
- 레벨 Platforms - Windows - Shipping설정 - Package Project클릭 원하는곳에 저장

## 스팀  멀티
- 플러그인 online subsystem과 online subsystem steam 둘다 체크
- 패키징 프로젝트 세팅 List of maps to include in a packaged build 에 레벨 추가
- 빌드.cs에 "OnlineSubsystemSteam", "OnlineSubsystem" 추가
- 프로젝트 config- DefaultEngine 열어서 코드 넣기(https://dev.epicgames.com/documentation/ko-kr/unreal-engine/online-subsystem-steam-interface-in-unreal-engine#%EC%B5%9C%EC%A2%85%EA%B2%B0%EA%B3%BC)
- 다 닫고 제너레이트 후 실행
-  코드에 추가 헤더, cpp
```cpp fold=header
#include "OnlineSubsystem.h"
#include "Interfaces/OnlineSessionInterface.h"	
public:
	TSharedPtr<class IOnlineSession, ESPMode::ThreadSafe> OnlineSessionInterface;
```
```cpp fold=cpp
#include "Engine/GameEngine.h"

IOnlineSubsystem* OnlineSubsystem = IOnlineSubsystem::Get();
if (OnlineSubsystem)
{
	OnlineSessionInterface = OnlineSubsystem->GetSessionInterface();

	if(GEngine)
	{
		GEngine->AddOnScreenDebugMessage(-1, 15.0f, FColor::Blue, 
			FString::Printf(TEXT("Find Subsystem: %s"), 
				*OnlineSubsystem->GetSubsystemName().ToString()));
	}
}
```

- 컴파일후 패키징  Shipping은 안되서 디버그나 디벨롭 모드로
- 스팀에서 실행후 Steam 출력확인
- 코드 추가
- 디폴트엔진.ini의 [OnlineSubsystemSteam]에 bInitServerOnclient=true 추가 (플레이어가 자체서버 만듬)
- 코드추가


## 플러그인 만들기
- 플러그인 - add 눌러  create plugin author, description작성해서
- 코드에 플러그인폴더안의 .uplugin, .Build.cs 코드추가
- build.cs에서 모듈을 추가해서 해당 파일의 경로 추가
- gameinstanceSubsystem을 상속받은 클래스를 name이름 옆에 플러그인으로 지정

```
// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "Subsystems/GameInstanceSubsystem.h"		// 언리얼 서브시스템을 관리하는 기본 클래스

#include "Interfaces/OnlinesSessionInterface.h"		// 온라인 멀티플레이 세션을 관리하기 위한 인터페이스

#include "MultiplaySessionsSubsystem.generated.h"

/**
 * 
 */
UCLASS()
class MULTIPLAYERSESSIONS_API UMultiplaySessionsSubsystem : public UGameInstanceSubsystem
{
	GENERATED_BODY()
	// 게임 인스턴스 서브시스템은게임이 실행되는 동안 지속되는 객체

public:
	UMultiplaySessionsSubsystem();

	// 새로운 온라인 세션을 생성하는 함수, 
	// NumPublicConnections는 공개 접속 수를 나타내고, MatchType은 세션의 유형을 나타냄
	void CreateSession(int32 NumPublicConnections, FString MatchType);

	// 세션을 검색하는 함수, MaxSearchResults는 최대 검색 결과 수를 나타냄
	void FindSessions(int32 MaxSearchResults);

	// 세션에 참여하는 함수,sessionResult는 참여할 세션의 검색 결과를 나타냄
	void joinSession(const FOnlineSessionSearchResult& SessionResult);

	// 현재	세션을 제거하는 함수
	void DestroySession();

	// 현재 세션을 시작하는 함수
	void StartSession();

private:
	// 온라인 세션을 관리하는 인터페이스
	IOnlineSessionPtr SessionInterface;

	// 세션 생성 완료시 호출되는 델리게이트
	FOnCreateSessionCompleteDelegate CreateSessionCompleteDelegate;
	FDelegateHandle CreateSessionCompleteDelegateHandle;

	// 세션 검색 완료시 호출되는 델리게이트
	FonFindSessionsCompleteDelegate FindSessionsCompleteDelegate;
	FDelegateHandle FindSessionsCompleteDelegateHandle;

	// 세션 참여 완료시 호출되는 델리게이트
	FOnJoinSessionCompleteDelegate JoinSessionCompleteDelegate;
	FDelegateHandle JoinSessionCompleteDelegateHandle;

	// 세션 제거 완료시 호출되는 델리게이트
	FOnDestroySessionCompleteDelegate DestroySessionCompleteDelegate;
	FDelegateHandle DestroySessionCompleteDelegateHandle;

	// 세션 시작 완료시 호출되는 델리게이트
	FOnStartSessionCompleteDelegate StartSessionCompleteDelegate;
	FDelegateHandle StartSessionCompleteDelegateHandle;
	
protected:
	// 세션 생성이 완료되었을 때 호출되는 함수
	void OnCreateSessionComplete(FName SessionName,bool bWasSuccessful);

	// 세션 검색이 완료되었을 때 호출되는 함수
	void OnFindSessionsComplete(bool bWasSuccessful);

	// 세션 참여가 완료되었을 때 호출되는 함수
	void OnJoinSessionComplete(FName SessionName, EOnJoinSessionCompleteResult::Type Result);

	// 세션 제거가 완료되었을 때 호출되는 함수
	void OnDestroySessionComplete(FName SessionName, bool bWasSuccessful);

	// 세션 시작이 완료되었을 때 호출되는 함수
	void OnStartSessionComplete(FName SessionName, bool bWasSuccessful);
};

```